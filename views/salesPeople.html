{% extends './layout.html' %}

{% block content %}

<div class='container'>
	<div class='well'>
		<form method='POST' action='/salesPeople'>	
			<div class='form-group'>
				<input name='newSalesUser' class='form-control' placeholder='Create New Sales User'/>
			</div>
				<button type='submit' class='btn btn-primary'> Create User </button>
		</form>
	</div>

	{% for salesPerson in salesPeople %}
		<div class='panel panel-default'>
			<div class='panel-heading'>
				{{ salesPerson.name }}
				<form style='display:inline' method='POST' action='/salesPeople/{{salesPerson.id}}?_method=DELETE'>
					<button style='display:inline' type='submit' class='btn btn-danger pull-right'> Delete Sales Person </button>
				</form>
				<br clear='all' />
			</div>
			<div class='panel-body'>
				<ul class='list-group'>
				{% for region in regions %}
					{% if salesPerson.Sales_People_Regions.length == 0 %}
						<li class='list-group-item'>
							{{ region.zipCode }}
							<form style='display:inline' method='POST' action='/salesPeopleRegions/{{salesPerson.id}}/{{region.id}}'>								 
								<button class='btn btn-primary pull-right'> Add </button>
							</form>
							<br clear='all' />
						</li>
					{% endif %}
								
					{% if salesPerson.Sales_People_Regions.length > 0 %}
						{% for salesPersonRegion in salesPerson.Sales_People_Regions %}
						<li  class='list-group-item {% if region.id == salesPersonRegion.RegionId %} list-group-item-success {% endif %}' >
									{{ region.zipCode }}
									{% if region.id == salesPersonRegion.RegionId %} 
										<form style='display:inline' method='POST' action='/salesPeopleRegions/{{salesPerson.id}}/{{region.id}}?_method=DELETE'>								 
											<button class='btn btn-danger pull-right'> Remove </button>
										</form>
									{% endif %}
									{% if region.id != salesPersonRegion.RegionId %}
										<form style='display:inline' method='POST' action='/salesPeopleRegions/{{salesPerson.id}}/{{region.id}}'>								 
											<button class='btn btn-primary pull-right'> Add </button>
										</form>
									{% endif %}
									<br clear='all' />
								</li>
						{% endfor %}
					{% endif %}
				{% endfor %}
				</ul>
			</div>
		</div>
	{% endfor %}
</div>
{% endblock %}